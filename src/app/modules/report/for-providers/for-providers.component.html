<app-title title="Reporte de Eventos - Agrupaciones"></app-title>
<mat-card>
	<form [formGroup]="form">
		<div class="row">
			<mat-form-field class="col-2" appearance="outline" floatLabel="always">
				<mat-label>Desde</mat-label>
				<input formControlName="dateStart" autocomplete="off" class="cursor-pointer" readonly matInput
					[matDatepicker]="pickerDateStart" [max]="maxDate" (click)="pickerDateStart.open()"
					(focus)="pickerDateStart.open()" placeholder="...">
				<mat-datepicker-toggle matSuffix [for]="pickerDateStart"></mat-datepicker-toggle>
				<mat-datepicker #pickerDateStart>
				</mat-datepicker>
			</mat-form-field>
			<mat-form-field class="col-2" appearance="outline" floatLabel="always">
				<mat-label>Hasta</mat-label>
				<input formControlName="dateEnd" autocomplete="off" class="cursor-pointer" readonly matInput
					[matDatepicker]="pickerDateEnd" [max]="maxDate" (click)="pickerDateEnd.open()"
					(focus)="pickerDateEnd.open()" placeholder="...">
				<mat-datepicker-toggle matSuffix [for]="pickerDateEnd"></mat-datepicker-toggle>
				<mat-datepicker #pickerDateEnd>
				</mat-datepicker>
			</mat-form-field>
			<mat-form-field class="col-2" appearance="outline" floatLabel="always">
				<mat-label>Tienda</mat-label>
				<input type="text" placeholder="Buscar tienda" aria-label="Store" matInput [formControl]="storeControl"
					[matAutocomplete]="store">
				<mat-icon matSuffix>keyboard_arrow_down</mat-icon>
				<mat-autocomplete #store="matAutocomplete" (optionSelected)="storeSelected($event.option.value)">
					<mat-option *ngFor="let option of stores" [key]="option.name" [value]="option.name">
						{{option.name}}
					</mat-option>
				</mat-autocomplete>
			</mat-form-field>
			<mat-form-field class="col-2" appearance="outline" floatLabel="always">
				<mat-label>Proveedor</mat-label>
				<input type="text" placeholder="Buscar proveedor" aria-label="Provider" matInput
					[formControl]="providerControl" [matAutocomplete]="provider">
				<mat-icon matSuffix>keyboard_arrow_down</mat-icon>
				<mat-autocomplete #provider="matAutocomplete" (optionSelected)="providerSelected($event.option.value)">
					<mat-option *ngFor="let option of providers" [value]="option.name">
						{{option.name}}
					</mat-option>
				</mat-autocomplete>
			</mat-form-field>
		</div>
		<div class="row">
			<div class="col-8 row-control-custom">
				<mat-form-field class="col-6" appearance="outline" floatLabel="always">
					<mat-label>Player</mat-label>
					<input type="text" placeholder="Buscar player" aria-label="Player" matInput
						[formControl]="playerControl" (keyup.enter)="findCustomer()">
				</mat-form-field>
				<mat-form-field class="col-6" appearance="outline" floatLabel="always">
					<mat-label>Juego</mat-label>
					<input type="text" placeholder="Buscar juego" aria-label="Juego" matInput
						[formControl]="gameControl" readonly (click)="openDialogGames()">
				</mat-form-field>
			</div>
			<div class="col-4">
				<button mat-raised-button color="primary" (click)="forProvidersByStores()" [disabled]="!form.valid">
					BUSCAR
				</button>
				<button mat-icon-button color="primary" class="mx-1" (click)="exportToCsv()">
					<mat-icon>get_app</mat-icon>
				</button>
			</div>
		</div>
	</form>
</mat-card>
<br>
<mat-card>
	<app-table-multifilter [tableId]="config.dataTable.tableId" [columns]="config.dataTable.columns"
		[pageSizeOptions]="config.dataTable.pageSizeOptions" [pageSize]="config.dataTable.pageSizeDefault"
		[actions]="config.dataTable.actionColumn" [index]="config.dataTable.indexColumn" [filters]="[]"
		[showFilters]="config.dataTable.showFilters" [showBtnReload]="config.dataTable.showBtnReload"
		[showBtnDownload]="config.dataTable.showBtnDownload" [showBtnAdd]="config.dataTable.showBtnAdd"
		[showChooseColumns]="config.dataTable.showChooseColumns"
		[showGroupByOptions]="config.dataTable.showGroupByOptions" [showTotals]="config.dataTable.showTotals"
		(onClickGroupOption)="groupBy($event)">
	</app-table-multifilter>
</mat-card>